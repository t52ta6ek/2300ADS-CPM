;
; *****
; ***** PARALLEL LINE PRINTER ROUTINES
; ***** TOM DE LELLIS
; ***** 11/29/85
; *****
;
	.Z80
	CSEG
;
	PUBLIC	LISTST
	PUBLIC	LISTOT
;
LPDATA	EQU	X'CD'			; PRINTER DATA PORT
LPSTAT	EQU	X'CD'			; PRINTER STATUS PORT
LPRDY	EQU	X'80'			; PRINTER BUSY BIT
;
TRUE	EQU	X'FF'
;
; *****
; ***** LINE PRINTER STATUS (BUSY LINE ONLY)
; ***** EXIT: A=0 IF BUSY ELSE A=X'FF'
; *****
;
LISTST:	IN	A,(LPSTAT)		; GET STATUS OF PRINTER
	CPL				; INVERT STATUS BITS
	AND	LPRDY			; CHECK ONLY IF BUSY
	RET	Z			; RETURN X'00' IF BUSY
	CPL				; NOT 0
	RET				; AND RETURN
;
; *****
; ***** LINE PRINTER OUTPUT
; ***** ENTRY C=CHARACTER, EXIT C,A=CHARACTER
; *****
;
LISTOT:	IN	A,(LPSTAT)		; GET STATUS
	AND	LPRDY			; CHECK IF BUSY
	JR	NZ,LISTOT		; IF BUSY, THEN WAIT TILL NOT BUSY
	LD	A,C			; PUT CHARACTER FROM C INTO A
	OUT	(LPDATA),A		; SEND IT TO THE PRINTER
	RET				; AND EXIT
;
	END
